<!DOCTYPE html>
<html lang="en">
  <head>
    <title>3D Bar Chart - Three Charts</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/jquery.tablesheet.css">
    <link rel="stylesheet" href="css/jquery-ui.css">
    <link rel="stylesheet" href="css/jquery.colorpicker.css">
    <link rel="stylesheet" href="css/scenes.css">
  </head>
  
  <body>
    
    <div id="div-controls">
      <a href="/charts3d"><img src="img/logo_s.png"></a>
      <div class="separator_big_h"></div>
      <ul>
        <li>
          <a href="#" title="export bar chart" id="link-export">
            <img src="img/icon_export.png" alt="Export"> Export 
          </a>
        </li>
        <li>
          <a href="#" title="edit bar chart" id="link-edit">
            <img src="img/icon_settings.png" alt="Edit"> Edit
          </a>
        </li>
      </ul>
    </div>
    
    <div id="div-databox">
      <h3>Add Your Data</h3>
      <table id="datatable" class="jqueryTableSheet">
      </table>
    </div>
    
    <div id="div-exportbox">
      <h3>Export chart</h3>
      <div class="separator_hid10"></div>
      <div id="link-export-image" class="general-button general-button-b element-centered">
        Export as image
      </div>
      <div class="separator_hid10"></div>
      <div id="link-export-embed" class="general-button general-button-b general-button-disabled element-centered">
        Embed in html<br>
        <span>(coming soon)</span>
      </div>
      <div class="separator_hid10"></div>
      <div id="link-export-openweb" class="general-button general-button-b general-button-disabled element-centered">
        Open as webpage<br>
        <span>(coming soon)</span>
      </div>
      <div class="separator_hid30"></div>
      <div class="separator_big_h"></div>
      <div class="separator_hid10"></div>
      <div id="link-export-close" class="general-button general-button-b element-centered">
        Cancel
      </div>
    </div>
    
  </body>
  
  <!-- <script src="js/InputData.js"></script> -->
  
  <script type="text/javascript" src="js/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="js/jquery-ui.js"></script>
  <script type="text/javascript" src="js/jquery.jeditable.mini.js"></script>
  <script type="text/javascript" src="js/jquery.colorpicker.js"></script>
  <script type="text/javascript" src="js/jquery.tablesheet.js"></script>
  <script type="text/javascript" src="js/three.min.js"></script>
  <script type="text/javascript" src="js/TrackballControls.js"></script>
  <script type="text/javascript" src="js/utils.js"></script>
  <script type="text/javascript" src="js/BarCubes.js"></script>
  <script type="text/javascript" src="js/ScaleTexts.js"></script>
  <script type="text/javascript" src="fonts/helvetiker_bold.typeface.js"></script>
  <script type="text/javascript" src="js/scene_bar.js"></script>
  
  <script>
  
    var schema = {};
    var dataValues = [];
    
    // Create the dialog box and calls the sheet plugin
    $( "#div-databox" ).dialog({
                modal: true,
                draggable: false,
                title: "Add your data",
                dialogClass: "datadialog",
                width:600,
                height:400,
                maxWidth: 800,
                maxHeight: 600,
                resizable: true
            });
            
    // Creates export dialog box
    $( "#div-exportbox" ).dialog({
                modal: true,
                draggable: false,
                title: "Export your chart",
                dialogClass: 'datadialog',
                disabled: true,
                width:600,
                height:400,
                resizable: false
            });
            
    // Adding the table sheet to the dialog
    $( "#datatable" ).tableSheet({
      exportText: 'Generate Chart',
      exportCall: function(param){
        schema = param.schema;
        dataValues = param.data;
        $( "#div-databox" ).dialog( "close" );
        initScene();
        animateScene();
      }
    });
    
    // link to open dialog again
    $( "#link-edit" ).click(function(){
      $( "#div-databox" ).dialog( "open" );
      return false;
    });
    
    // link to open the export box
    $( "#link-export" ).click(function(){
      $( "#div-exportbox" ).dialog( "open" );
      return false;
    });
    
    // link to close the export box
    $( "#link-export-close" ).click(function(){
      $( "#div-exportbox" ).dialog( "close" );
      return false;
    });
    
    // Closes the export dialog box at the begining
    $( "#div-exportbox" ).dialog( "close" );
    
    
  </script>

</html>
